# 矩形加矩形求和

## 初来乍到：矩形总面积

### 题目描述

平面上有个两个矩形 $R_1$ 和 $R_2$, 它们各边都与坐标轴平行。设 $\left(x_1, y_1\right)$ 和 $\left(x_2, y_2\right)$ 依次是 $R_1$ 的左下角和右上角坐标, $\left(x_3, y_3\right)$ 和 $\left(x_4, y_4\right)$ 依次是 $R_2$ 的左下角和右上角坐标，请你计算 $R_1$ 和 $R_2$ 的总面积是多少?

注意：如果 $R_1$ 和 $R_2$ 有重叠区域，重叠区域的面积只计算一次。

### 输入格式

输入只有一行，包含 $8$ 个整数，依次是： $x_1,y_1,x_2,y_2,x_3,y_3,x_4,y_4$ 。

### 输出格式

一个整数，代表答案。

### 数据范围
所有坐标范围是 $[0,10^5]$ 。


## 小试牛刀：矩形面积并

### 题目描述

求 $n$ 个四边平行于坐标轴的矩形的面积并。

### 输入格式

第一行一个正整数 $n$。

接下来 $n$ 行每行四个非负整数 $x_1, y_1, x_2, y_2$，表示一个矩形的四个端点坐标为 $(x_1, y_1),(x_1, y_2),(x_2, y_2),(x_2, y_1)$。

### 输出格式

一行一个正整数，表示 $n$ 个矩形的并集覆盖的总面积。


对于 $20\%$ 的数据，$1 \le n \le 1000$。  
对于 $100\%$ 的数据，$1 \le n \le {10}^5$，$0 \le x_1 < x_2 \le {10}^9$，$0 \le y_1 < y_2 \le {10}^9$。

## 渐入佳境：矩形加矩形求和（静态）

### 题目描述

一个 $h\times w$ 网格，首先有 $q1$ 次矩形加操作：
- $(r1,r2,c1,c2,x)$ 代表给左上角 $(r1,c1)$、右下角 $(r2,c2)$ 的矩形区域加 $x$

接下来有 $q2$ 次矩形求和查询：
- $(r1,r2,c1,c2)$ 代表询问左上角 $(r1,c1)$、右下角 $(r2,c2)$ 的矩形区域的和，对 $10^9+7$ 取模。

### 输入格式

第一行4个整数 $h,w,q1,q2$

接下来 $q1$ 行，每行5个整数  $(r1,r2,c1,c2,x)$ 代表一次矩形加

接下来 $q2$ 行，每行4个整数  $(r1,r2,c1,c2)$ 代表一次矩形求和

### 输出格式

输出 $q2$ 行，对于每次查询输出一行一个整数代表答案

### 数据范围
对于 $100\%$ 的数据，$1\le h,w\le 10^9, 1\le q1,q2\le 10^5， 1\le r1\le r2\le h, 1\le c1\le c2\le w, 0\le x<10^9+7$。

## 炉火纯青：矩形加矩形求和

### 题目描述
有一二维平面, 每个整点上都有一个元素, 初始时所有元素值为 0 , 你可以进行以下两种操作:
``1 x1 x2 y1 y2 v`` 将所有的 $x \in[x 1, x 2], y \in[y 1, y 2]$ 的元素加 $v$ 。
``2 x1 x2 y1 y2`` 查询所有的 $x \in[x 1, x 2], y \in[y 1, y 2]$ 的元素对 $10^9+7$ 取模的和。
你需要对每个查询操作, 输出其答案。

### 输入格式

第一行，输入一个数 $q$ ，表示操作个数。
接下来 $q$ 行，每行输入一个操作。

### 输出格式
对于每个查询操作，输出其对应答案。

### 数据范围

令 $x 1, x 2, y 1, y 2$ 的范围为 $[1,S]$ 。

对于 $50\%$ 的数据， $q \le 10^3,S \le 10^3$。

对于 $80\%$ 的数据， $q \le 10^5,S \le 10^5$。

对于 $100\%$ 的数据， $q \le 10^5,S \le 10^9$。

## 登峰造极

将 ``炉火纯青：矩形加矩形求和`` 改为强制在线。